# Notes: Stack & Monotonic Stack

---

## 1. Stack Basics

* **Definition**: A stack is a linear data structure that follows **LIFO (Last In, First Out)** principle.
* **Key Operations**:

  * `push(x)` → add element on top.
  * `pop()` → remove top element.
  * `top()` / `peek()` → view top element.
  * `empty()` → check if stack is empty.

---

### Special Pattern for Using Stack

> **Whenever we want the last input to be processed first (LIFO order), we use a stack.**

* Example: Undo feature in editors, function call stack in recursion.
* In algorithms: Stack is often used when we need to **remember past elements** while processing new ones.

---

## 2. Monotonic Stack

* **Definition**: A stack that is maintained in either:

  * **Increasing order** (monotonic increasing stack).
  * **Decreasing order** (monotonic decreasing stack).

* **Why useful?**
  It helps to quickly find "Next Greater Element", "Next Smaller Element", "Previous Greater Element", etc. in **O(n)** instead of **O(n²)**.

---

### Types of Monotonic Stack

1. **Monotonic Increasing Stack**

   * Elements in stack are in increasing order from bottom → top.
   * Used to find **Next Smaller Element**.
   * Example: For heights `[2, 1, 4, 3]`, stack helps us find the next smaller element for each.

2. **Monotonic Decreasing Stack**

   * Elements in stack are in decreasing order from bottom → top.
   * Used to find **Next Greater Element**.
   * Example: For `[2, 1, 4, 3]`, stack helps us find the next greater element for each.

---

## 3. Standard Problems

### (A) Next Greater Element (NGE)

* Problem: For each element, find the next element to the right which is greater.
* Approach:

  1. Traverse from right → left.
  2. Maintain a **monotonic decreasing stack**.
  3. Pop smaller/equal elements until stack top is greater.
  4. Answer is stack top (if exists).

**Example**: nums = `[2,1,2,4,3]`

* NGE = `[4,2,4,-1,-1]`

---

### (B) Next Smaller Element (NSE)

* Problem: For each element, find the next smaller element to the right.
* Approach:

  * Similar to NGE, but use **monotonic increasing stack**.

---

### (C) Largest Rectangle in Histogram

* Uses **monotonic increasing stack** to compute nearest smaller bars.
* Helps find the largest rectangle efficiently.

---

### (D) Daily Temperatures

* For each day, find how many days until a warmer temperature.
* Uses **monotonic decreasing stack**.

---

## 4. Template Code (Next Greater Element)

```cpp
vector<int> nextGreaterElement(vector<int>& nums) {
    int n = nums.size();
    vector<int> nge(n, -1);
    stack<int> st;

    for (int i = n - 1; i >= 0; i--) {
        while (!st.empty() && st.top() <= nums[i]) {
            st.pop();
        }
        if (!st.empty()) nge[i] = st.top();
        st.push(nums[i]);
    }
    return nge;
}
```

---

## 5. Complexity

* Each element is pushed once and popped once → **O(n)** time.
* Stack stores at most `n` elements → **O(n)** space.

---

## 6. Real-World Analogy

* **Stack**: Like a stack of plates (last plate placed is the first taken).
* **Monotonic Stack**: Like keeping only useful plates in order (removing broken ones that won’t help later).

---

**Summary**:

* Stack = LIFO structure.
* Monotonic Stack = Special stack where elements are always increasing/decreasing.
* Powerful for array problems (NGE, NSE, Histogram, Daily Temperatures).
* Time complexity = **O(n)** because each element enters/exits stack once.

