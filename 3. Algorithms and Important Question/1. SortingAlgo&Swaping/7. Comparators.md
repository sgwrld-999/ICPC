## 1. What are Comparators?

In **C++**, a **comparator** is a callable entity (function, function object, or lambda) that defines a **custom ordering rule** for comparing two values.
It is typically used by STL algorithms and containers to decide **how elements should be ordered** (ascending, descending, or custom criteria).

A comparator must:

* Accept two parameters of the same type (or compatible types).
* Return a `bool` indicating whether the first argument should come **before** the second in the ordering.

**Example (default comparator in `std::sort`):**

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    std::vector<int> v = {5, 2, 8, 1};
    std::sort(v.begin(), v.end()); // uses default operator< for ascending
    for (int x : v) std::cout << x << " ";
}
```

---

## 2. Usage

Comparators are commonly used for:

* **Sorting** (e.g., `std::sort`, `std::stable_sort`)
* **Priority queues** (`std::priority_queue`)
* **Associative containers** (e.g., `std::set`, `std::map`)
* **Custom search** algorithms

**Why?**
They let you define **"what does smaller mean"** for your context — it might be based on size, lexicographic order, a struct field, or even a completely custom rule.

---

## 3. Types of Comparators in C++

### 3.1 Function Pointers

A **function pointer comparator** is a regular function used for comparison, passed by its address.

**Example:**

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

bool cmp(int a, int b) {
    return a > b; // descending
}

int main() {
    std::vector<int> v = {5, 2, 8, 1};
    std::sort(v.begin(), v.end(), cmp);
    for (int x : v) std::cout << x << " ";
}
```

---

### 3.2 Function Objects (Functors)

A **functor** is a class/struct that overloads the `operator()` to behave like a function.

**Example:**

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

struct Compare {
    bool operator()(int a, int b) const {
        return a > b; // descending
    }
};

int main() {
    std::vector<int> v = {5, 2, 8, 1};
    std::sort(v.begin(), v.end(), Compare());
    for (int x : v) std::cout << x << " ";
}
```

**Advantages:**

* Can store state (unlike plain function pointers).
* Often faster (inlineable by compiler).

---

### 3.3 Lambda Functions

A **lambda** is an inline anonymous function that can be passed directly to algorithms without separately defining a function.

**Example:**

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    std::vector<int> v = {5, 2, 8, 1};
    std::sort(v.begin(), v.end(), [](int a, int b) {
        return a > b; // descending
    });
    for (int x : v) std::cout << x << " ";
}
```

---

#### Working of the Capture Clause

The **capture clause** in a lambda controls how variables from the enclosing scope are made available to the lambda.

Syntax:

```cpp
[capture_list](parameters) -> return_type { body }
```

**Capture Modes:**

* `[ ]` – captures nothing.
* `[=]` – captures all variables **by value** (copy).
* `[&]` – captures all variables **by reference**.
* `[x]` – captures variable `x` **by value**.
* `[&x]` – captures variable `x` **by reference**.
* Mixed captures allowed: `[x, &y]`.

**Example:**

```cpp
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
    int pivot = 5;
    std::vector<int> v = {7, 3, 8, 1};
    
    std::sort(v.begin(), v.end(), [pivot](int a, int b) {
        return abs(a - pivot) < abs(b - pivot); // sort by closeness to pivot
    });
    
    for (int x : v) std::cout << x << " ";
}
```

Here:

* `pivot` is captured **by value**.
* Even though `pivot` is outside the lambda, it is accessible inside.

---

## 4. Applications of Comparators

1. **Custom Sorting:** Sorting strings ignoring case, sorting structures by multiple fields.
2. **Priority Queues:** Changing heap behaviour from max-heap to min-heap.
3. **Associative Containers:** Maintaining sorted order based on a custom key rule.
4. **Graph Algorithms:** Sorting edges by weight in Kruskal’s algorithm.
5. **Event Scheduling:** Sorting events by timestamp.

---

## 5. Practice Questions

**GeeksforGeeks:**

* [Sort an array according to the order defined by another array](https://www.geeksforgeeks.org/sort-array-according-order-defined-another-array/)
* [Sort a vector of pairs in C++](https://www.geeksforgeeks.org/sorting-a-vector-of-pairs-in-c-set-1-sort-by-first-and-second/)
* [Custom comparator in priority\_queue](https://www.geeksforgeeks.org/implement-min-heap-using-stl/)

**LeetCode:**

* [56. Merge Intervals](https://leetcode.com/problems/merge-intervals/) – Sort intervals by start time.
* [973. K Closest Points to Origin](https://leetcode.com/problems/k-closest-points-to-origin/) – Custom distance comparator.
* [179. Largest Number](https://leetcode.com/problems/largest-number/) – Sort numbers based on concatenation rules.

---

